<Project Sdk="Microsoft.NET.Sdk">
 <PropertyGroup>
  <TargetFramework>net472</TargetFramework>
  <LangVersion>9.0</LangVersion>
  <UseWindowsForms>true</UseWindowsForms>
  <Nullable>enable</Nullable>
  <AllowUnsafeBlocks>true</AllowUnsafeBlocks>
  <AppendTargetFrameworkToOutputPath>false</AppendTargetFrameworkToOutputPath>
  <ProduceReferenceAssembly>false</ProduceReferenceAssembly>
  <CopyLocalLockfileAssemblies>true</CopyLocalLockfileAssemblies>
  <Platforms>x64;x86</Platforms>

  <Product>ReClass.NET Plugin</Product>
  <Authors>Pohky</Authors>
  <Description>FFXIVClientStructs Plugin</Description>
  <Version>1.0.0.2</Version>

  <ReClassExe>C:\Tools\ReClass\$(Platform)\ReClass.NET.exe</ReClassExe>
  <PluginOutDir>C:\Tools\ReClass\$(Platform)\Plugins\</PluginOutDir>
 </PropertyGroup>

 <ItemGroup>
  <PackageReference Include="YamlDotNet" Version="11.2.1" />
  <Reference Include="ReClass.NET" HintPath="$(ReClassExe)" Private="false" />
 </ItemGroup>


 <ItemGroup>
  <PluginFiles Include="$(OutDir)$(AssemblyName).dll" />
  <PluginFiles Include="$(OutDir)YamlDotNet.dll" />
 </ItemGroup>

 <Target Name="CopyDev" AfterTargets="Build">
  <Copy SourceFiles="@(PluginFiles)" DestinationFolder="$(PluginOutDir)">
   <Output TaskParameter="CopiedFiles" ItemName="CopiedList" />
   <Output TaskParameter="DestinationFiles" ItemName="DestinationList" />
  </Copy>
  <Message Text="Copied: %(DestinationList.FullPath)" Importance="High" />
 </Target>

 <Target Name="CleanDev" AfterTargets="Clean">
  <Delete Files="@(PluginFiles->'$(PluginOutDir)%(Filename)%(Extension)')">
   <Output TaskParameter="DeletedFiles" ItemName="DeletedList" />
  </Delete>
  <Message Text="Deleted: '%(DeletedList.FullPath)'" Importance="High" />
 </Target>
</Project>